"use strict";function asyncGeneratorStep(t,o,e,a,n,i,s){try{var r=t[i](s),c=r.value}catch(t){return void e(t)}r.done?o(c):Promise.resolve(c).then(a,n)}function _asyncToGenerator(r){return function(){var t=this,s=arguments;return new Promise(function(o,e){var a=r.apply(t,s);function n(t){asyncGeneratorStep(a,o,e,n,i,"next",t)}function i(t){asyncGeneratorStep(a,o,e,n,i,"throw",t)}n(void 0)})}}var id=window.localStorage.getItem("id"),token=window.localStorage.getItem("token");id||($(".on").addClass("active"),$(".off").removeClass("active")),$.ajax({url:"http://localhost:8888/users/info?id="+id,headers:{authorization:token},success:function(t){401===t.code||0===t.code?($(".on").addClass("active"),$(".off").removeClass("active")):($(".nickname").html(t.info.nickname),$(".on").removeClass("active"),$(".off").addClass("active"))}}),$(".logout").on("click",_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.ajax({url:"http://localhost:8888/users/logout",data:{id:id}});case 2:1===t.sent.code&&(window.localStorage.removeItem("id"),window.localStorage.removeItem("token"),window.location.replace("./login.html"));case 4:case"end":return t.stop()}},t)}))),console.log($GLOBAL_HOME);var result=$GLOBAL_HOME.goodsFloorData;$("#navul").html("<li>".concat(result[1].body.floor_name,'<div id="nav1"></div></li>\n<li>').concat(result[2].body.floor_name,'<div id="nav2"></div></li>\n<li>').concat(result[3].body.floor_name,'<div id="nav3"></div></li>\n<li>').concat(result[4].body.floor_name,'<div id="nav4"></div></li>\n<li>').concat(result[6].body.floor_name,'<div id="nav5"></div></li>\n<li>').concat(result[7].body.floor_name,'<div id="nav6"></div></li>\n<li>').concat(result[8].body.floor_name,'<div id="nav7"></div></li>\n<li>').concat(result[10].body.floor_name,'<div id="nav8"></div></li>'));for(var i=1;i<2;i++){for(var string1="",j=0;j<6;j++)string1+='<p data-a="'.concat(i,'" data-b="').concat(j,'" data-id="').concat(result[i].body.product_list[j].product_id,'"><img src="').concat(result[i].body.product_list[j].img_url,'"><span>').concat(result[i].body.product_list[j].product_name,"</span></p>");$("#nav".concat(i)).html(string1)}for(var _i=2;_i<5;_i++){for(var _string="",_j=0;_j<6;_j++)_string+='<p data-a="'.concat(_i,'" data-b="').concat(_j,'" data-id="').concat(result[_i].body.tab_content[0].product_list[_j].product_id,'"><img src="').concat(result[_i].body.tab_content[0].product_list[_j].img_url,'"><span>').concat(result[_i].body.tab_content[0].product_list[_j].product_name,"</span></p>");$("#nav".concat(_i)).html(_string)}for(var _i2=6;_i2<9;_i2++){for(var _string2="",_j2=0;_j2<6;_j2++)_string2+='<p data-a="'.concat(_i2,'" data-b="').concat(_j2,'" data-id="').concat(result[_i2].body.tab_content[0].product_list[_j2].product_id,'"><img src="').concat(result[_i2].body.tab_content[0].product_list[_j2].img_url,'"><span>').concat(result[_i2].body.tab_content[0].product_list[_j2].product_name,"</span></p>");$("#nav".concat(_i2-1)).html(_string2)}for(var _i3=10;_i3<11;_i3++){for(var _string3="",_j3=0;_j3<6;_j3++)_string3+='<p data-a="'.concat(_i3,'" data-b="').concat(_j3,'" data-id="').concat(result[_i3].body.tab_content[0].product_list[_j3].product_id,'"><img src="').concat(result[_i3].body.tab_content[0].product_list[_j3].img_url,'"><span>').concat(result[_i3].body.tab_content[0].product_list[_j3].product_name,"</span></p>");$("#nav".concat(_i3-2)).html(_string3)}var videoAll=$GLOBAL_HOME.goodsFloorData[11].body,string2="\n<span>".concat(videoAll.floor_name,"</span>\n");$(".top").html(string2);var string3="";videoAll.items.forEach(function(t){string3+='\n    <div><video class="four_video" src="'.concat(t.video_url,'" poster="').concat(t.img_url,'"></video></div>  \n  ')}),$(".bottom").html(string3),$(".four_video").on({mouseover:function(){$(this).attr("controls","true")},mouseout:function(){$(this).removeAttr("controls")}}),$.ajax({url:"https://floor.jd.com/recommend-v20/focus_monetize/get",data:{source:"pc-home"},dataType:"Jsonp",success:function(t){var o,e=1;for(o in t.data){var a='<a href=""><img src="'.concat(t.data[o][0].src,'"></a>');$(".swiper-slide").eq(e++).html(a)}}}),$("input").on("keyup",function(t){t.target.value?(t=t.target.value,$.ajax({url:"https://www.baidu.com/sugrec?pre=1&p=3&ie=utf-8&json=1&prod=pc&from=pc_web&sugsid=35264,35105,31254,35239,35456,34584,34505,26350,35209,35311&wd=".concat(t,"&req=2&csor=1&"),dataType:"Jsonp",success:function(t){var o,e="";for(o in t.g)e+="<li>".concat(t.g[o].q,"</li>");$("#search").html(e).css("display","block")}})):$("#search").css("display","none")}),$(window).on("scroll",function(){400<$(window).scrollTop()?$(".pos").css("display","block"):$(".pos").css("display","none")}),$(".pos").on("click","li",function(){"返回顶部"==$(this).html()&&$("html,body").animate({scrollTop:0},500),"手机专区"==$(this).html()&&$("html,body").animate({scrollTop:950},500),"手表专区"==$(this).html()&&$("html,body").animate({scrollTop:2080},500),"电视专区"==$(this).html()&&$("html,body").animate({scrollTop:3210},500),"生活专区"==$(this).html()&&$("html,body").animate({scrollTop:4340},500)}),$.ajax({url:"http://localhost:8888/goods/category",success:function(t){for(var o="",e=2;e<=11;e++)o+="<li>".concat(t.list[e],"</li>");o+='\n    <div class="bannerlist">\n    <div id="bannertop">\n        <div>\n            <span id="caption"></span>\n        </div>\n    </div>\n    <div id="bannerbottom">\n      <img src="https://misc.360buyimg.com/mtd/pc/index_2019/1.0.0/assets/img/2ff7a1a01305c5081d75f15fa6f9b223.gif" alt="">\n    </div>\n</div>',$("#catelist").html(o)}}),$("#catelist").on("mouseover","li",function(t){t=t.target.innerHTML;$("#caption").html(t),$.ajax({url:"http://localhost:8888/goods/list",data:{current:1,pagesize:12,category:t},headers:{authorization:token},success:function(t){var o,e="";for(o in t.list)e+='<ol data-id="'.concat(t.list[o].goods_id,'">\n                <img src="').concat(t.list[o].img_big_logo,'">\n                <span>').concat(t.list[o].title,"</span>\n              </ol>");$("#bannerbottom").html(e)}})});var phoneInfo={current:1,pagesize:8,filter:"",sortType:"id",sortMethod:"ASC",category:"手机相机"},watchInfo={current:1,pagesize:8,filter:"",sortType:"id",sortMethod:"ASC",category:"钟表眼镜"},tvInfo={current:1,pagesize:8,filter:"",sortType:"id",sortMethod:"ASC",category:"大家电"},lifeInfo={current:1,pagesize:8,filter:"",sortType:"id",sortMethod:"ASC",category:"邮币乐器"};function getGoodsList(e){$.ajax({url:"http://localhost:8888/goods/list",data:e,success:function(t){var o="";switch(t.list.forEach(function(t){o+='\n        <li data-id="'.concat(t.goods_id,'">\n          <div class="show">\n            <img src="').concat(t.img_big_logo,'" alt="">\n          </div>\n          <div class="info">\n            <p class="title">\n              ').concat(t.title,'\n            </p>\n            <p class="price">\n                ￥').concat(t.current_price,'\n            </p>\n            <p class="add">\n              <button data-id="').concat(t.goods_id,'">加入购物车</button>\n            </p>\n          </div>\n        </li>\n      ')}),e){case phoneInfo:$(".phonelist").html(o),$(".left").eq(0).attr("class",1===phoneInfo.current?"left disable":"left"),$(".right").eq(1).attr("class",phoneInfo.current===t.total?"right disable":"right"),$(".total").eq(0).html(phoneInfo.current+" / "+t.total),$(".goto").eq(0).val(phoneInfo.current),$(".goto").eq(0).attr("data-all",t.total);break;case watchInfo:$(".watchlist").html(o),$(".left").eq(1).attr("class",1===watchInfo.current?"left disable":"left"),$(".right").eq(3).attr("class",watchInfo.current===t.total?"right disable":"right"),$(".total").eq(1).html(watchInfo.current+" / "+t.total),$(".goto").eq(1).val(watchInfo.current),$(".goto").eq(1).attr("data-all",t.total);break;case tvInfo:$(".tvlist").html(o),$(".left").eq(2).attr("class",1===tvInfo.current?"left disable":"left"),$(".right").eq(5).attr("class",tvInfo.current===t.total?"right disable":"right"),$(".total").eq(2).html(tvInfo.current+" / "+t.total),$(".goto").eq(2).val(tvInfo.current),$(".goto").eq(2).attr("data-all",t.total);break;case lifeInfo:$(".lifelist").html(o),$(".left").eq(3).attr("class",1===lifeInfo.current?"left disable":"left"),$(".right").eq(7).attr("class",lifeInfo.current===t.total?"right disable":"right"),$(".total").eq(3).html(lifeInfo.current+" / "+t.total),$(".goto").eq(3).val(lifeInfo.current),$(".goto").eq(3).attr("data-all",t.total)}}})}getGoodsList(phoneInfo),getGoodsList(watchInfo),getGoodsList(tvInfo),getGoodsList(lifeInfo),$(".func").eq(0).on("click",function(t){var o;"psort_item"==t.target.className&&($(".psort_item").removeClass("active"),t.target.classList.add("active"),phoneInfo.sortMethod=t.target.dataset.method,getGoodsList(phoneInfo)),"right"===t.target.className&&(phoneInfo.current++,getGoodsList(phoneInfo)),"left"===t.target.className&&(phoneInfo.current--,getGoodsList(phoneInfo)),"go"===t.target.className&&(o=+t.target.previousElementSibling.value,(t=+t.target.previousElementSibling.dataset.all)<=(o=(o=o||1)<1?1:o)&&(o=t),o=parseInt(o),phoneInfo.current=o,getGoodsList(phoneInfo))}),$(".func").eq(1).on("click",function(t){var o;"wsort_item"==t.target.className&&($(".wsort_item").removeClass("active"),t.target.classList.add("active"),watchInfo.sortMethod=t.target.dataset.method,getGoodsList(watchInfo)),"right"===t.target.className&&(watchInfo.current++,getGoodsList(watchInfo)),"left"===t.target.className&&(watchInfo.current--,getGoodsList(watchInfo)),"go"===t.target.className&&(o=+t.target.previousElementSibling.value,(t=+t.target.previousElementSibling.dataset.all)<=(o=(o=o||1)<1?1:o)&&(o=t),o=parseInt(o),watchInfo.current=o,getGoodsList(watchInfo))}),$(".func").eq(2).on("click",function(t){var o;"tsort_item"==t.target.className&&($(".tsort_item").removeClass("active"),t.target.classList.add("active"),tvInfo.sortMethod=t.target.dataset.method,getGoodsList(tvInfo)),"right"===t.target.className&&(tvInfo.current++,getGoodsList(tvInfo)),"left"===t.target.className&&(tvInfo.current--,getGoodsList(tvInfo)),"go"===t.target.className&&(o=+t.target.previousElementSibling.value,(t=+t.target.previousElementSibling.dataset.all)<=(o=(o=o||1)<1?1:o)&&(o=t),o=parseInt(o),tvInfo.current=o,getGoodsList(tvInfo))}),$(".func").eq(3).on("click",function(t){var o;"lsort_item"==t.target.className&&($(".lsort_item").removeClass("active"),t.target.classList.add("active"),lifeInfo.sortMethod=t.target.dataset.method,getGoodsList(lifeInfo)),"right"===t.target.className&&(lifeInfo.current++,getGoodsList(lifeInfo)),"left"===t.target.className&&(lifeInfo.current--,getGoodsList(lifeInfo)),"go"===t.target.className&&(o=+t.target.previousElementSibling.value,(t=+t.target.previousElementSibling.dataset.all)<=(o=(o=o||1)<1?1:o)&&(o=t),o=parseInt(o),lifeInfo.current=o,getGoodsList(lifeInfo))}),$("#navul").on("click","p",function(t){var o=this.dataset.id,e=this.dataset.a,a=this.dataset.b;console.log(o),console.log(e),console.log(a),window.sessionStorage.setItem("goodsId",o),window.sessionStorage.setItem("a",e),window.sessionStorage.setItem("b",a),window.location.href="./detail.html"}),$("#catelist").on("click","ol",function(t){var o=this.dataset.id;console.log(o),window.sessionStorage.setItem("goodsId",o),window.location.href="./detail.html"}),$(".phonelist").on("click","li",function(t){var o=this.dataset.id;window.sessionStorage.setItem("goodsId",o),window.location.href="./detail.html"}),$(".watchlist").on("click","li",function(t){var o=this.dataset.id;window.sessionStorage.setItem("goodsId",o),window.location.href="./detail.html"}),$(".tvlist").on("click","li",function(t){var o=this.dataset.id;window.sessionStorage.setItem("goodsId",o),window.location.href="./detail.html"}),$(".lifelist").on("click","li",function(t){var o=this.dataset.id;window.sessionStorage.setItem("goodsId",o),window.location.href="./detail.html"}),$(".phonelist,.watchlist,.tvlist,.lifelist").on("click","button",function(t){t.stopPropagation(),console.log(this.dataset.id);var o=this.dataset.id;id?$.ajax({url:"http://localhost:8888/users/info?id="+id,headers:{authorization:token},success:function(t){401===t.code||0===t.code?alert("登陆已过期，请重新登录后进行购物，谢谢您光临"):$.ajax({url:"http://localhost:8888/cart/add",data:{id:id,goodsId:o},method:"POST",headers:{authorization:token},success:function(t){1===t.code&&alert("添加商品成功")}})}}):alert("请登陆后进行购物,谢谢合作")}),setTimeout(function(){$(".video").animate({width:200,height:118,right:132,top:815},2e3,"linear")},7e3);