"use strict";function asyncGeneratorStep(t,n,o,a,i,s,c){try{var e=t[s](c),d=e.value}catch(t){return void o(t)}e.done?n(d):Promise.resolve(d).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,c=arguments;return new Promise(function(n,o){var a=e.apply(t,c);function i(t){asyncGeneratorStep(a,n,o,i,s,"next",t)}function s(t){asyncGeneratorStep(a,n,o,i,s,"throw",t)}i(void 0)})}}var id=window.localStorage.getItem("id"),token=window.localStorage.getItem("token");id||($(".on").addClass("active"),$(".off").removeClass("active")),$.ajax({url:"http://localhost:8888/users/info?id="+id,headers:{authorization:token},success:function(t){401===t.code||5===t.code?($(".on").addClass("active"),$(".off").removeClass("active")):($(".nickname").html(t.info.nickname),$(".on").removeClass("active"),$(".off").addClass("active"))}}),$(".logout").on("click",_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.ajax({url:"http://localhost:8888/users/logout",data:{id:id}});case 2:1===t.sent.code&&(window.localStorage.removeItem("id"),window.localStorage.removeItem("token"),window.location.replace("./login.html"));case 4:case"end":return t.stop()}},t)})));var result=$GLOBAL_HOME.goodsFloorData;$("#navul").html('<li id="all">全部商品<ul id="catelist"></ul></li>\n<li>'.concat(result[1].body.floor_name,'<div id="nav1"></div></li>\n<li>').concat(result[2].body.floor_name,'<div id="nav2"></div></li>\n<li>').concat(result[3].body.floor_name,'<div id="nav3"></div></li>\n<li>').concat(result[4].body.floor_name,'<div id="nav4"></div></li>\n<li>').concat(result[6].body.floor_name,'<div id="nav5"></div></li>\n<li>').concat(result[7].body.floor_name,'<div id="nav6"></div></li>\n<li>').concat(result[8].body.floor_name,'<div id="nav7"></div></li>\n<li>').concat(result[10].body.floor_name,'<div id="nav8"></div></li>')),console.log(result[1].body.product_list);for(var i=1;i<2;i++){for(var string1="",j=0;j<6;j++)string1+='<p data-id="'.concat(result[i].body.product_list[j].product_id,'"><img src="').concat(result[i].body.product_list[j].img_url,'"><span>').concat(result[i].body.product_list[j].product_name,"</span></p>");$("#nav".concat(i)).html(string1)}for(var _i=2;_i<5;_i++){for(var _string="",_j=0;_j<6;_j++)_string+='<p data-id="'.concat(result[_i].body.tab_content[0].product_list[_j].product_id,'"><img src="').concat(result[_i].body.tab_content[0].product_list[_j].img_url,'"><span>').concat(result[_i].body.tab_content[0].product_list[_j].product_name,"</span></p>");$("#nav".concat(_i)).html(_string)}for(var _i2=6;_i2<9;_i2++){for(var _string2="",_j2=0;_j2<6;_j2++)_string2+='<p data-id="'.concat(result[_i2].body.tab_content[0].product_list[_j2].product_id,'"><img src="').concat(result[_i2].body.tab_content[0].product_list[_j2].img_url,'"><span>').concat(result[_i2].body.tab_content[0].product_list[_j2].product_name,"</span></p>");$("#nav".concat(_i2-1)).html(_string2)}for(var _i3=10;_i3<11;_i3++){for(var _string3="",_j3=0;_j3<6;_j3++)_string3+='<p data-id="'.concat(result[_i3].body.tab_content[0].product_list[_j3].product_id,'"><img src="').concat(result[_i3].body.tab_content[0].product_list[_j3].img_url,'"><span>').concat(result[_i3].body.tab_content[0].product_list[_j3].product_name,"</span></p>");$("#nav".concat(_i3-2)).html(_string3)}$("#all").on({mousemove:function(){$("#catelist").css("display","block")},mouseout:function(){$("#catelist").css("display","none")}}),$.ajax({url:"http://localhost:8888/goods/category",success:function(t){for(var n="",o=2;o<=11;o++)n+="<li>".concat(t.list[o],"</li>");n+='\n      <div class="bannerlist">\n      <div id="bannerbottom">\n        <img src="https://misc.360buyimg.com/mtd/pc/index_2019/1.0.0/assets/img/2ff7a1a01305c5081d75f15fa6f9b223.gif" alt="">\n      </div>\n  </div>',$("#catelist").html(n)}}),$("#catelist").on("mouseover","li",function(t){t=t.target.innerHTML;$("#caption").html(t),$.ajax({url:"http://localhost:8888/goods/list",data:{current:1,pagesize:12,category:t},headers:{authorization:token},success:function(t){var n,o="";for(n in t.list)o+='<ol data-id="'.concat(t.list[n].goods_id,'">\n                  <img src="').concat(t.list[n].img_big_logo,'">\n                  <span>').concat(t.list[n].title,"</span>\n                </ol>");$("#bannerbottom").html(o)}})}),$("input").on("keyup",function(t){t.target.value?(t=t.target.value,$.ajax({url:"https://www.baidu.com/sugrec?pre=1&p=3&ie=utf-8&json=1&prod=pc&from=pc_web&sugsid=35264,35105,31254,35239,35456,34584,34505,26350,35209,35311&wd=".concat(t,"&req=2&csor=1&"),dataType:"Jsonp",success:function(t){var n,o="";for(n in t.g)o+="<li>".concat(t.g[n].q,"</li>");$("#search").html(o).css("display","block")}})):$("#search").css("display","none")});var goods_id=window.sessionStorage.getItem("goodsId"),a=window.sessionStorage.getItem("a"),b=window.sessionStorage.getItem("b");console.log(goods_id),console.log(a),console.log(b),$.ajax({url:"http://localhost:8888/goods/item",data:{id:goods_id},success:function(t){var n,o,i;2===t.code?(console.log($GLOBAL_HOME),o=$GLOBAL_HOME.goodsFloorData,"1"===a?(n="",n+='\n              <div class="left">\n                  <img src="'.concat(o[a].body.product_list[b].img_url,'" alt="">\n                  <div class="mask"></div>\n                  <div class="enlarge">\n                  <img src="').concat(o[a].body.product_list[b].img_url,'" alt="">\n                  </div>      \n              </div>\n              <div class="right">\n                  <p class="title">').concat(o[a].body.product_list[b].product_name,'</p>\n                  <p class="description">').concat(o[a].body.product_list[b].product_brief,'</p>\n                  <div class="pay">\n                      <span class="new">折扣价:￥').concat(o[a].body.product_list[b].product_price,'</span>\n                      <span class="old">原价:￥').concat(o[a].body.product_list[b].product_org_price,'</span>\n                      <span class="timer">距结束:  <span></span>天<span></span>小时<span></span>分<span></span>秒</span>\n                  </div>\n                  <button class="add" data-id="').concat(o[a].body.product_list[b].product_id,'">添加购物车</button>\n                  <button class="buy">立即购买</button>\n              </div>'),$(".goodlist").html(n)):(i="",i+='\n              <div class="left">\n                  <img src="'.concat(o[a].body.tab_content[0].product_list[b].img_url,'" alt="">\n                  <div class="mask"></div>\n                  <div class="enlarge">\n                  <img src="').concat(o[a].body.tab_content[0].product_list[b].img_url,'" alt="">\n                  </div>      \n              </div>\n              <div class="right">\n                  <p class="title">').concat(o[a].body.tab_content[0].product_list[b].product_name,'</p>\n                  <p class="description">').concat(o[a].body.tab_content[0].product_list[b].product_brief,'</p>\n                  <div class="pay">\n                      <span class="new">折扣价:￥').concat(o[a].body.tab_content[0].product_list[b].product_price,'</span>\n                      <span class="old">原价:￥').concat(o[a].body.tab_content[0].product_list[b].product_org_price,'</span>\n                      <span class="timer">距结束:  <span></span>天<span></span>小时<span></span>分<span></span>秒</span>\n                  </div>\n                  <button class="add" data-id="').concat(o[a].body.tab_content[0].product_list[b].product_id,'">添加购物车</button>\n                  <button class="buy">立即购买</button>\n              </div>\n                  '),$(".goodlist").html(i))):(console.log(t),o="",o+='\n        <div class="left">\n            <img src="'.concat(t.info.img_big_logo,'" alt="">\n            <div class="mask"></div>\n            <div class="enlarge">\n            <img src="').concat(t.info.img_big_logo,'" alt="">\n            </div>      \n        </div>\n        <div class="right">\n            <p class="title">').concat(t.info.category,'</p>\n            <p class="description">').concat(t.info.title,'</p>\n            <div class="pay">\n                <span class="new">折扣价:￥').concat(t.info.current_price,'</span>\n                <span class="old">原价:￥').concat(t.info.price-100,'</span>\n                <span class="timer">距结束:  <span></span>天<span></span>小时<span></span>分<span></span>秒</span>\n            </div>\n            <button class="add" data-id="').concat(t.info.goods_id,'">添加购物车</button>\n            <button class="buy">立即购买</button>\n        </div>\n            '),i="",i+='\n            <div class="intorduce">'.concat(t.info.goods_introduce,"</div>\n        "),$(".goodlist").html(o),$(".introduce").html(i))}}),$(window).ajaxStop(function(){setInterval(function(){var t=new Date,n=new Date(2022,0,1,0,0,0).getTime()-t.getTime(),o=parseInt(n/864e5);n%=864e5;var a=parseInt(n/36e5);n%=36e5;t=parseInt(n/6e4);n%=6e4;n=parseInt(n/1e3);$(".timer").find("span").eq(0).html(o),$(".timer").find("span").eq(1).html(a),$(".timer").find("span").eq(2).html(t),$(".timer").find("span").eq(3).html(n)},1e3),$(".add").on("click",function(t){console.log(this.dataset.id);var n=this.dataset.id;id?$.ajax({url:"http://localhost:8888/users/info?id="+id,headers:{authorization:token},success:function(t){401===t.code?alert("登陆已过期，请重新登录后进行购物，谢谢您光临"):$.ajax({url:"http://localhost:8888/cart/add",data:{id:id,goodsId:n},method:"POST",headers:{authorization:token},success:function(t){0===t.code&&alert("小米商品没有库存哦,别点啦"),1===t.code&&alert("添加商品成功")}})}}):alert("请登陆后进行购物,谢谢合作")}),$(".buy").on("click",function(){alert("假装购买成功了呗")})});